{
  "meta": {
    "project": "Citylifes",
    "date": "2025-11-19",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "Citylifes is a mobile-first, multi-category hyperlocal marketplace platform targeting Indian Tier-1 and Tier-2 cities. It enables users to browse, list, and transact across properties, vehicles, electronics, and business listings with zero brokerage, emphasizing direct owner-to-user communication and verified listings.",
  "core_goals": [
    "Enable zero-brokerage, hyperlocal marketplace listing across multiple categories including properties, vehicles, electronics, and businesses.",
    "Provide a fast, seamless, mobile-optimized user experience with real-time search and accurate geolocation-based filtering.",
    "Support large-scale concurrent users (10+ million) with high performance and accessibility standards.",
    "Enable verified listings and trusted user communication with robust safety, moderation, and review systems.",
    "Integrate comprehensive lead management, CRM, and ad campaign tools to empower listing owners and advertisers."
  ],
  "key_features": [
    "Multi-category listings covering residential, commercial, land, vehicles, electronics, and businesses with tailored forms and fields.",
    "Advanced search with autocomplete, filters by location, category, price, and 'Near Me' radius selector using geolocation and Haversine distance computations.",
    "Real-time chat, call integration, and lead capture system tied into a centralized lead management dashboard with organic and paid lead tracking.",
    "Comprehensive CRM system to manage clients and tasks linking leads to client stages and activities.",
    "Ad campaign creation, management, and analytics with sponsored listings carousel and real-time impression/click tracking.",
    "Review systems for business listings and user profiles with eligibility checks, moderation, and rating displays.",
    "Robust safety and moderation workflows including user reporting, admin dashboards, and enforcement actions (warnings, suspensions, bans).",
    "Mobile app support with Capacitor integrating native features like GPS, camera, splash screen, and sharing.",
    "SEO and performance optimizations including structured data schemas, real-time sitemap generation, image optimization, and code splitting.",
    "Admin dashboard for managing users, listings, reports, and reviews with role-based access control.",
    "Favorites management, image upload with compression, live location updates, and Zillow-style map view with clustering and price markers."
  ],
  "user_flow_summary": [
    "User registers or logs in using email/password or Google OAuth, completes profile setup if new.",
    "User browses listings via homepage, category pages, or map view with filters and search autocomplete.",
    "User views listing details including images, pricing, reviews, and can favorite or contact the owner.",
    "When contacting, lead is auto-created; owner can manage leads on dashboard, update statuses, and add notes.",
    "Owners can create and manage listings, create ad campaigns, and track campaign analytics.",
    "Users can write reviews post-interaction with eligibility enforced via interactions history.",
    "Reported users/listings are processed through reporting interface; admins review reports and take actions.",
    "Users communicate in-app via messaging, with chat history and lead linkage.",
    "Admins manage platform via dedicated dashboard for users, listings, campaigns, and reports."
  ],
  "validation_criteria": [
    "All form data is validated using Zod schemas with real-time feedback.",
    "Authentication flows include secure email verification, password reset, and OAuth handling.",
    "Lead creation triggers and counts are validated and synchronized via database triggers and real-time subscriptions.",
    "Search results and filters correctly fetch and display with pagination and relevance scoring.",
    "Ad campaign impression and click counts update accurately on user interaction.",
    "Reviews are permitted only for eligible users and limit one review per user per entity.",
    "Admin actions enforce data constraints and update user/listing states accordingly.",
    "Mobile app operates with correct native permissions and integrates location, camera, and sharing features seamlessly.",
    "Performance benchmarks met: Lighthouse scores â‰¥ 90 in Performance, SEO, Accessibility, and load times < 2 seconds.",
    "Security policies enforce row level security and proper data access control across tables and APIs."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "TailwindCSS",
      "Radix UI",
      "TanStack Query",
      "React Router",
      "Supabase",
      "Capacitor (Android/iOS)",
      "Zod",
      "React Hook Form",
      "Google Maps (@vis.gl/react-google-maps)",
      "Terser"
    ],
    "features": [
      {
        "name": "App Bootstrap",
        "description": "Vite + React entry, global styles, and app mount.",
        "files": [
          "src/main.tsx",
          "src/App.tsx",
          "src/index.css",
          "index.html"
        ]
      },
      {
        "name": "Routing & Layout",
        "description": "Top-level layout, navigation, and shell components (sidebar, bottom nav).",
        "files": [
          "src/components/Layout.tsx",
          "src/components/AppSidebar.tsx",
          "src/components/BottomNav.tsx"
        ]
      },
      {
        "name": "Authentication Context",
        "description": "App-wide auth state and route protection.",
        "files": [
          "src/contexts/AuthContext.tsx",
          "src/components/RequireAuth.tsx"
        ]
      },
      {
        "name": "Location Context & Geolocation",
        "description": "User location state, selectors, and near-me filters.",
        "files": [
          "src/contexts/LocationContext.tsx",
          "src/components/LiveLocationButton.tsx",
          "src/components/LocationSelector.tsx",
          "src/components/CityAreaPincodeSelector.tsx",
          "src/components/NearMeFilter.tsx",
          "src/components/MapFilters.tsx"
        ]
      },
      {
        "name": "Listings & Properties",
        "description": "Listing cards, galleries, pricing markers, and promoted listings.",
        "files": [
          "src/components/PropertyCard.tsx",
          "src/components/ListingGallery.tsx",
          "src/components/PriceMarker.tsx",
          "src/components/PromotedListingCard.tsx",
          "src/data/properties.ts",
          "src/data/propertyTypes.ts"
        ]
      },
      {
        "name": "Search & Filters",
        "description": "Enhanced search UX with autocomplete and advanced filters.",
        "files": [
          "src/components/EnhancedSearchBar.tsx",
          "src/components/SearchBar.tsx",
          "src/components/MapFilters.tsx",
          "src/hooks/useAdvancedSearch.tsx",
          "src/hooks/useAutocomplete.tsx"
        ]
      },
      {
        "name": "Reviews",
        "description": "User reviews, forms, and dialogs for writing reviews.",
        "files": [
          "src/components/ReviewCard.tsx",
          "src/components/ReviewsList.tsx",
          "src/components/ReviewForm.tsx",
          "src/components/WriteReviewDialog.tsx"
        ]
      },
      {
        "name": "Lead Capture & Campaigns",
        "description": "Lead dialogs and campaign creation, analytics, and CRM hooks.",
        "files": [
          "src/components/LeadCaptureDialog.tsx",
          "src/components/CampaignLeadsSection.tsx",
          "src/components/CreateCampaignDialog.tsx",
          "src/hooks/useLeads.tsx",
          "src/hooks/useAdCampaigns.tsx",
          "src/hooks/useCampaignAnalytics.tsx",
          "src/hooks/useCRM.tsx"
        ]
      },
      {
        "name": "Favorites & Notifications",
        "description": "Favoriting and notification state management hooks.",
        "files": [
          "src/hooks/useFavorites.tsx",
          "src/hooks/useNotifications.tsx"
        ]
      },
      {
        "name": "Messaging",
        "description": "Real-time or in-app messaging hooks.",
        "files": [
          "src/hooks/useMessages.tsx"
        ]
      },
      {
        "name": "Admin Features",
        "description": "Admin checks and dashboards for users, properties, reports, and stats.",
        "files": [
          "src/hooks/useAdminCheck.tsx",
          "src/hooks/useAdminUsers.tsx",
          "src/hooks/useAdminProperties.tsx",
          "src/hooks/useAdminReports.tsx",
          "src/hooks/useAdminStats.tsx"
        ]
      },
      {
        "name": "Nearby & Map Clustering",
        "description": "Hooks for nearby properties and map cluster management.",
        "files": [
          "src/hooks/useNearbyProperties.tsx",
          "src/hooks/useMapClusters.tsx"
        ]
      },
      {
        "name": "Images & Uploads",
        "description": "Optimized images, upload with compression, and preloading.",
        "files": [
          "src/components/ImageUploadWithCompression.tsx",
          "src/components/OptimizedImage.tsx",
          "src/hooks/useImagePreload.tsx"
        ]
      },
      {
        "name": "UI Library",
        "description": "Shared UI components based on Radix + Tailwind.",
        "files": [
          "src/components/ui"
        ]
      },
      {
        "name": "SEO & Schema",
        "description": "Structured data and crawler configuration.",
        "files": [
          "src/components/SEOSchema.tsx",
          "public/robots.txt",
          "public/sitemap.xml"
        ]
      },
      {
        "name": "PWA & Manifest",
        "description": "Web app manifest and base HTML shell.",
        "files": [
          "public/manifest.json",
          "index.html"
        ]
      },
      {
        "name": "Supabase Integration",
        "description": "Supabase setup and migrations; client usage across hooks/services.",
        "files": [
          "supabase/config.toml",
          "supabase/migrations",
          "supabase/templates"
        ]
      },
      {
        "name": "Data Sources",
        "description": "Static data and location datasets.",
        "files": [
          "src/data/indianLocations.ts",
          "src/data/properties.ts",
          "src/data/propertyTypes.ts"
        ]
      },
      {
        "name": "Utilities, Types & Schemas",
        "description": "Shared utils, type definitions, and Zod schemas.",
        "files": [
          "src/utils",
          "src/types",
          "src/schemas"
        ]
      },
      {
        "name": "Branding & Assets",
        "description": "Logos, app icons, and icon generation script.",
        "files": [
          "src/components/Logo.tsx",
          "src/components/AppIcon.tsx",
          "generate-icons.sh",
          "src/assets"
        ]
      },
      {
        "name": "Reporting & Safety",
        "description": "Report user dialog and related flows.",
        "files": [
          "src/components/ReportUserDialog.tsx"
        ]
      },
      {
        "name": "Mobile (Capacitor)",
        "description": "Capacitor configuration and native platform projects.",
        "files": [
          "capacitor.config.ts",
          "android/",
          "ios/"
        ]
      },
      {
        "name": "Build & Tooling",
        "description": "Vite, Tailwind, ESLint, TypeScript, and PostCSS configuration.",
        "files": [
          "vite.config.ts",
          "tailwind.config.ts",
          "postcss.config.js",
          "eslint.config.js",
          "tsconfig.json",
          "tsconfig.app.json",
          "tsconfig.node.json",
          "package.json"
        ]
      },
      {
        "name": "Public Docs & Guides",
        "description": "Static public HTML guides and debug pages.",
        "files": [
          "public/chat-features-guide.html",
          "public/debug-delete.html"
        ]
      }
    ]
  }
}
